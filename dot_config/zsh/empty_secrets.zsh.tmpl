# -----------------------------------------------------------------------------
# AUTOMATED SECRETS FROM 1PASSWORD
# Source: Daemon Desktop Secrets
# -----------------------------------------------------------------------------

{{- $secrets := onepassword "daemon-secrets" "Daemon" -}}
{{ range $secrets.fields }}
  {{- /* Filter out default metadata fields if any (optional safety check) */ -}}
  {{- if and (ne .label "notesPlain") (ne .value "") }}
export {{ .label }}="{{ .value }}"
  {{- end }}
{{- end }}

# Hidden secrets
unset AWS_ACCESS_KEY_ID
unset AWS_SECRET_ACCESS_KEY
